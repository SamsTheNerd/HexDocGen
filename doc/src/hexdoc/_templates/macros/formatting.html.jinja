{% import "macros/recipes.html.jinja" as recipe_macros with context %}

{# jump to top icon in section headers #}
{% macro jump_to_top() -%}

{%- endmacro %}

{# link icon in section headers to get a permalink to that section #}
{% macro permalink(href, class_name="") -%}
  {# \hyperref[ sec:{{ href }}]{(link)} #}
{%- endmacro %}

{# header for categories and entries #}
{% macro section_header(value, header_tag, class_name) -%}
  
  {{header_tag}}{
    {{- value.name ~ jump_to_top() ~ permalink(value.id.path) -}}
    }
{%- endmacro %}

{% macro render_icon(iconish, name="") -%}
  {% if iconish.gaslighting is defined %}
      {{ recipe_macros.render_item(iconish) }}
    {% else %}
      {{
      recipe_macros.render_texture(
        name=name,
        texture=iconish,
        class_names=[],
      )
      }}
    {% endif %}
{%- endmacro%}

{# link to value.id, with spoiler blur if value is a spoiler #}
{% macro maybe_spoilered_link(value) -%}
  \hyperref[ sec:{{ value.id.path}} ]{ {{ value.name }}}
{%- endmacro %}

{# macro block which spoiler blurs its content if value is a spoiler #}
{% macro maybe_spoilered(value) -%}
    {{ caller() }}
{%- endmacro %}
